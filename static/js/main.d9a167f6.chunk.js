(this["webpackJsonpreact-prosto"]=this["webpackJsonpreact-prosto"]||[]).push([[0],{130:function(e,t,n){"use strict";n.d(t,"b",(function(){return o})),n.d(t,"a",(function(){return i}));var a=n(46),r=n(4),o=function(e){return{type:"SEND-MESSAGE",newMessageText:e}},c={dialogUsers:[{id:1,userName:"Evgeny"},{id:2,userName:"Liza"},{id:3,userName:"Olya"},{id:4,userName:"Sasha"}],dialogMessages:[{id:1,message:"Hello how are you?"},{id:2,message:"Whats app"},{id:3,message:"Go walk on the street"},{id:4,message:"ya poshel spat"}]},i=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:c,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SEND-MESSAGE":return Object(r.a)(Object(r.a)({},e),{},{dialogMessages:[].concat(Object(a.a)(e.dialogMessages),[{id:5,message:t.newMessageText}])});default:return e}}},163:function(e,t,n){e.exports=n(294)},168:function(e,t,n){},169:function(e,t,n){},170:function(e,t){e.exports="data:image/png;base64,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"},175:function(e,t,n){},176:function(e,t,n){},18:function(e,t,n){"use strict";n.d(t,"b",(function(){return u})),n.d(t,"a",(function(){return l}));var a=n(99),r=n(0),o=n.n(r),c=n(95),i=n.n(c),u=function(e){var t=e.input,n=e.meta,r=(Object(a.a)(e,["input","meta"]),n.touched&&n.error);return o.a.createElement("div",{className:r&&i.a.formcontrollError},o.a.createElement("div",null,o.a.createElement("textarea",t)),r&&o.a.createElement("span",null,n.error))},l=function(e){var t=e.input,n=e.meta,r=Object(a.a)(e,["input","meta"]),c=n.touched&&n.error;return console.log(r.type),o.a.createElement("div",{className:c&&i.a.formcontrollError},o.a.createElement("div",null,o.a.createElement("input",Object.assign({},t,{type:r.type,placeholder:r.placeholder}))),c&&o.a.createElement("span",null,n.error))}},194:function(e,t,n){e.exports={currentPage:"users_currentPage__1Xhj5"}},195:function(e,t,n){},20:function(e,t,n){e.exports={nav:"Nav_nav__1tTws",item:"Nav_item__241vP",active:"Nav_active__qvRrI"}},28:function(e,t,n){e.exports={profile:"Profile_profile__12Bk-",description:"Profile_description__j5rGM",avatar:"Profile_avatar__1voWr",personalInfo:"Profile_personalInfo__3MrW3",name:"Profile_name__IVqip",me:"Profile_me__2N8gU"}},294:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),o=n(64),c=n.n(o),i=(n(168),n(24)),u=n(25),l=n(27),s=n(26),p=(n(169),n(71)),m=n.n(p),f=n(11),d=function(e){return r.a.createElement("header",{className:m.a.header},r.a.createElement("img",{className:m.a.logo,src:n(170)}),r.a.createElement("div",{className:m.a.loginBlock},e.isAuth?r.a.createElement("div",null,e.login," - ",r.a.createElement("button",{className:r.a.createElement("s",{className:"myButton"}),onClick:e.logout},"logout")," "):r.a.createElement(f.b,{to:"/login"},"login")))},g=n(20),E=n.n(g),h=function(){return r.a.createElement("nav",{className:E.a.nav},r.a.createElement("div",{className:E.a.item},r.a.createElement(f.b,{to:"/profile",activeClassName:E.a.active},"Profile")),r.a.createElement("div",{className:E.a.item},r.a.createElement(f.b,{to:"/dialogs",activeClassName:E.a.active},"Messages")),r.a.createElement("div",{className:E.a.item},r.a.createElement(f.b,{to:"/news",activeClassName:E.a.active},"News")),r.a.createElement("div",{className:E.a.item},r.a.createElement(f.b,{to:"/settings",activeClassName:E.a.active},"Settings")),r.a.createElement("div",{className:E.a.item},r.a.createElement(f.b,{to:"/users",activeClassName:E.a.active},"Users")))},v=n(9),b=(n(175),function(){return r.a.createElement("div",null,"News")}),A=(n(176),function(){return r.a.createElement("div",null,"Settings")}),O=n(10),w=n(46),j=n(4),P=n(65).create({withCredentials:!0,baseURL:"https://social-network.samuraijs.com/api/1.0/",headers:{"API-KEY":"f82df6c3-33b7-4f9c-aecf-8cc3197eb73e"}}),C=function(){return P.get("users").then((function(e){return e.data}))},S=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:100;return P.get("users?count=".concat(t,"&page=").concat(e)).then((function(e){return e.data}))},N=function(e){return P.get("profile/".concat(e)).then((function(e){return e.data}))},I=function(e){return P.post("follow/".concat(e)).then((function(e){return e.data}))},y=function(e){return P.delete("follow/".concat(e)).then((function(e){return e.data}))},T=function(){return P.get("auth/me").then((function(e){return e.data}))},k=function(e){return P.get("profile/status/".concat(e)).then((function(e){return e.data}))},D=function(e){return P.put("profile/status",{status:e}).then((function(e){return e.data}))},U=function(e,t,n,a){return P.post("auth/login",{email:e,password:t,rememberMe:n,captcha:a}).then((function(e){return e.data}))},x=function(){return P.delete("auth/login").then((function(e){return e.data}))},B=function(e){var t=new FormData;return t.append("image",e),P.put("profile/photo",t).then((function(e){return e.data}))},L=function(e){return P.put("profile",e).then((function(e){return e.data}))},M=function(){return P.get("security/get-captcha-url").then((function(e){return e.data}))},_={users:[],pageSize:100,totalUsersCount:0,currentPage:1,isLoading:!1,followingInProgress:[]},R=function(e){return{type:"SET_USERS",users:e}},G=function(e){return{type:"TOGGLE_IS_LOADING",toggle:e}},Z=function(e,t){return{type:"FOLLOWING_IN_PROGRESS",isFetching:e,userId:t}},z=n(69),J=n.n(z),F=(n(194),n(38)),Q=n.n(F),W=n(68),Y=n(40),H=n(72),V=n.n(H),K=n(135),q=n.n(K),X=function(e){for(var t=e.totalItemsCount,n=e.pageSize,o=e.currentPage,c=e.onPageChanged,i=e.portionSize,u=void 0===i?10:i,l=Math.ceil(t/n),s=[],p=1;p<=l;p++)s.push(p);var m=Math.ceil(l/u),f=Object(a.useState)(1),d=Object(Y.a)(f,2),g=d[0],E=d[1],h=(g-1)*u+1,v=g*u;return r.a.createElement("div",{className:V.a.paginator},g>1&&r.a.createElement("button",{onClick:function(){E(g-1)}},"PREV"),s.filter((function(e){return e>=h&&e<=v})).map((function(e){return r.a.createElement("span",{className:q()(Object(W.a)({},V.a.selectedPage,o===e),V.a.pageNumber),key:e,onClick:function(t){c(e)}},e)})),m>g&&r.a.createElement("button",{onClick:function(){E(g+1)}},"NEXT"))},$=function(e){for(var t=Math.ceil(e.totalUsersCount/e.pageSize),n=[],a=1;a<=t;a++)n.push(a);return r.a.createElement("div",null,e.isLoading?r.a.createElement("div",null,r.a.createElement("img",{src:Q.a,alt:""})):null,r.a.createElement(X,{currentPage:e.currentPage,onPageChanged:e.onPageChanged,totalItemsCount:e.totalUsersCount,pageSize:e.pageSize}),e.users.map((function(t){return r.a.createElement("div",{key:t.id},r.a.createElement("div",null,r.a.createElement(f.b,{to:"profile/".concat(t.id)},r.a.createElement("img",{src:null!=t.photos.small?t.photos.small:J.a,alt:"profilePhoto"}))),r.a.createElement("div",null,r.a.createElement("h3",null,t.name)),r.a.createElement("div",null,t.followed?r.a.createElement("button",{disabled:e.followingInProgress.some((function(e){return e===t.id})),onClick:function(){e.unfollow(t.id)}},"unfollow"):r.a.createElement("button",{disabled:e.followingInProgress.some((function(e){return e===t.id})),onClick:function(){e.follow(t.id)}},"follow")))})))},ee=n(7),te=n(77),ne=function(e){return e.usersPage.users},ae=function(e){return e.usersPage.pageSize},re=function(e){return e.usersPage.totalUsersCount},oe=function(e){return e.usersPage.currentPage},ce=function(e){return e.usersPage.isLoading},ie=function(e){return e.usersPage.followingInProgress},ue=function(e){Object(l.a)(n,e);var t=Object(s.a)(n);function n(){var e;Object(i.a)(this,n);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).onPageChanged=function(t){e.props.getUsers2(t,e.props.pageSize)},e}return Object(u.a)(n,[{key:"componentDidMount",value:function(){this.props.getUsers1()}},{key:"render",value:function(){return r.a.createElement($,{totalUsersCount:this.props.totalUsersCount,pageSize:this.props.pageSize,currentPage:this.props.currentPage,onPageChanged:this.onPageChanged,follow:this.props.follow,unfollow:this.props.unfollow,users:this.props.users,isLoading:this.props.isLoading,followingInProgress:this.props.followingInProgress})}}]),n}(r.a.Component),le=Object(ee.d)(Object(O.b)((function(e){return{users:ne(e),pageSize:ae(e),totalUsersCount:re(e),currentPage:oe(e),isLoading:ce(e),followingInProgress:ie(e)}}),{follow:function(e){return function(t){t(Z(!0,e)),I(e).then((function(n){0===n.resultCode&&(t(function(e){return{type:"FOLLOW",userId:e}}(e)),t(Z(!1,e)))}))}},unfollow:function(e){return function(t){t(Z(!0,e)),y(e).then((function(n){0===n.resultCode&&(t(function(e){return{type:"UNFOLLOW",userId:e}}(e)),t(Z(!1,e)))}))}},getUsers1:function(){return function(e){e(G(!0)),C().then((function(t){e(G(!1)),e(R(t.items)),e({type:"SET_USERS_COUNT",count:t.totalCount})}))}},getUsers2:function(e,t){return function(n){n({type:"SET_CURRENT_PAGE",currentPage:e}),n(G(!0)),S(e,t).then((function(e){n(G(!1)),n(R(e.items))}))}}}))(ue),se=(n(195),n(28)),pe=n.n(se),me=n(18),fe=n(31),de=n(131),ge=n(132),Ee=Object(ge.a)({form:"edit-profile"})((function(e){return r.a.createElement("form",{onSubmit:e.handleSubmit},r.a.createElement("button",null,"save"),r.a.createElement("div",{className:pe.a.name},"Full name: ",e.profile.fullName,r.a.createElement(de.a,{name:"fullName",component:me.a,placeholder:"Full name"})),r.a.createElement("div",{className:pe.a.description},"About Me: ",r.a.createElement(de.a,{name:"aboutMe",component:me.b,placeholder:"About me"})),r.a.createElement("div",null,"lookingForAJob: ",r.a.createElement(de.a,{name:"lookingForAJob",component:"input",type:"checkbox"})),r.a.createElement("div",null,"lookingForAJobDescription: ",r.a.createElement(de.a,{name:"lookingForAJobDescription",component:me.b,placeholder:"lookingForAJobDescription"})," "),r.a.createElement("div",null,r.a.createElement("h3",null,"Contacts:"),Object.keys(e.profile.contacts).map((function(e){return r.a.createElement("div",null,r.a.createElement("b",null,e,": "),r.a.createElement(de.a,{name:"contacts."+e,component:me.a,placeholder:e}))}))),r.a.createElement("div",null,e.error))})),he=function(e){var t=e.title,n=e.value;return r.a.createElement("div",null,r.a.createElement("b",null,t,": "),r.a.createElement("a",{href:n},n))},ve=function(e){return r.a.createElement("div",{className:pe.a.personalInfo},e.id===e.profile.userId&&r.a.createElement("button",{onClick:e.goToEditMode},"edit"),r.a.createElement("div",{className:pe.a.name},"Full name:",e.profile.fullName),r.a.createElement("div",{className:pe.a.description},"About Me:",e.profile.aboutMe),r.a.createElement("div",null,"lookingForAJob: ",e.profile.lookingForAJob?"yes":"no"),e.profile.lookingForAJob&&r.a.createElement("div",null,"lookingForAJobDescription: ",e.profile.lookingForAJobDescription),r.a.createElement("div",null,r.a.createElement("h3",null,"Contacts:"),Object.keys(e.profile.contacts).map((function(t){return r.a.createElement(he,{value:e.profile.contacts[t],title:t})}))))},be=function(e){var t=Object(a.useState)(!1),n=Object(Y.a)(t,2),o=n[0],c=n[1];if(!e.profile)return r.a.createElement("img",{src:Q.a,alt:""});return r.a.createElement("div",{className:pe.a.profile},r.a.createElement("div",{className:pe.a.me},r.a.createElement("div",{className:pe.a.avatar},r.a.createElement("img",{src:e.profile.photos.large||J.a,alt:"Profile avatar"}),e.id===e.profile.userId&&r.a.createElement("input",{type:"file",onChange:function(t){t.target.files.length&&e.updatePhoto(t.target.files[0])}})),o?r.a.createElement(Ee,{initialValues:e.profile,profile:e.profile,onSubmit:function(t){e.uploadProfile(t).then((function(){c(!1)}))}}):r.a.createElement(ve,{id:e.id,profile:e.profile,goToEditMode:function(){c(!0)}})))},Ae=n(14),Oe=n.n(Ae),we=n(34),je=function(e){return function(){var t=Object(we.a)(Oe.a.mark((function t(n){var a;return Oe.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,N(e);case 2:a=t.sent,n({type:"SET_USER_PROFILE",profile:a});case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},Pe={posts:[{id:1,post:"\u041f\u0440\u0438\u0432\u0435\u0442, \u043e\u0442\u043b\u0438\u0447\u043d\u044b\u0439 \u0441\u0430\u0439\u0442"},{id:2,post:"\u041a\u0440\u0443\u0442\u043e, \u0434\u043e\u0431\u0430\u0432\u044c \u043c\u0435\u043d\u044f \u0432 \u0434\u0440\u0443\u0437\u044c\u044f!"}],newTextPost:"",profile:null,status:""},Ce=n(74),Se=n.n(Ce),Ne=n(98),Ie=n.n(Ne),ye=function(e){return r.a.createElement("div",{className:Ie.a.post},r.a.createElement("img",{className:Ie.a.avatar,src:"https://cdn.worldvectorlogo.com/logos/tiktok-logo-2--1.svg",alt:"avatar"}),r.a.createElement("div",null,e.text),r.a.createElement("button",null,"Like"))},Te=Object(fe.a)(30),ke=Object(ge.a)({form:"post"})((function(e){return r.a.createElement("form",{onSubmit:e.handleSubmit},r.a.createElement("div",{className:Se.a.addNewPosts},r.a.createElement(de.a,{component:me.b,name:"post",validate:[fe.b,Te]}),r.a.createElement("button",{className:Se.a.myButton},"\u041e\u043f\u0443\u0431\u043b\u0438\u043a\u043e\u0432\u0430\u0442\u044c")))})),De=function(e){console.log("render YO");var t=e.posts.map((function(e){return r.a.createElement(ye,{key:e.id,text:e.post})}));return r.a.createElement("div",{className:Se.a.posts},r.a.createElement(ke,{onSubmit:function(t){e.addPost(t.post)}}),t)},Ue=Object(O.b)((function(e){return{posts:e.profilePage.posts,newTextPost:e.profilePage.newTextPost}}),{addPost:function(e){return{type:"ADD-POST",newTextPost:e}}})(De),xe=function(e){var t=Object(a.useState)(!1),n=Object(Y.a)(t,2),o=n[0],c=n[1],i=Object(a.useState)(e.status),u=Object(Y.a)(i,2),l=u[0],s=u[1];return Object(a.useEffect)((function(){s(e.status)}),[e.status]),e.profile?r.a.createElement("div",null,e.id===e.profile.userId?r.a.createElement("div",null,!o&&r.a.createElement("div",{onDoubleClick:function(){c(!0)}},r.a.createElement("span",null,e.status||"--------- ")),o&&r.a.createElement("div",null,r.a.createElement("input",{autoFocus:!0,onChange:function(e){s(e.currentTarget.value)},onBlur:function(){c(!1),e.updateStatus(l)},value:l}))):r.a.createElement("span",null,e.status||"--------- ")):r.a.createElement("div",null,"loading...")},Be=function(e){Object(l.a)(n,e);var t=Object(s.a)(n);function n(){return Object(i.a)(this,n),t.apply(this,arguments)}return Object(u.a)(n,[{key:"componentDidMount",value:function(){var e=this.props.match.params.userId;e||(e=this.props.authUserId),this.props.getProfileInfo(e),this.props.getStatus(e)}},{key:"componentDidUpdate",value:function(e,t,n){if(this.props.match.params.userId!=e.match.params.userId){var a=this.props.match.params.userId;a||(a=this.props.authUserId),this.props.getProfileInfo(a),this.props.getStatus(a)}}},{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement(be,Object.assign({},this.props,{uploadProfile:this.props.uploadMyProfile})),r.a.createElement(xe,Object.assign({},this.props,{status:this.props.status,updateStatus:this.props.updateStatus})),r.a.createElement(Ue,null))}}]),n}(r.a.Component),Le=Object(ee.d)(Object(O.b)((function(e){return{profile:e.profilePage.profile,auth:e.auth.isAuth,id:e.auth.id,status:e.profilePage.status,authUserId:e.auth.id}}),{getProfileInfo:je,getStatus:function(e){return function(){var t=Object(we.a)(Oe.a.mark((function t(n){var a;return Oe.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,k(e);case 2:a=t.sent,n({type:"SET_STATUS",status:a});case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},updateStatus:function(e){return function(t){return D(e).then((function(n){0===n.resultCode&&t(function(e){return{type:"UPDATE_STATUS",status:e}}(e))}))}},updatePhoto:function(e){return function(t){return B(e).then((function(e){0===e.resultCode&&t(function(e){return{type:"SET_PHOTO_SUCCESS",photo:e}}(e.data.photos))}))}},uploadMyProfile:function(e){return function(){var t=Object(we.a)(Oe.a.mark((function t(n,a){var r;return Oe.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,L(e);case 2:t.sent,r=a().auth.id,n(je(r));case 5:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()}}),v.f,te.a)(Be),Me=n(37),_e={id:null,email:null,login:null,isAuth:!1,captcha:null},Re=function(e,t,n,a){return{type:"SET_USER_DATA",data:{id:e,email:t,login:n,isAuth:a}}},Ge=function(){return function(){var e=Object(we.a)(Oe.a.mark((function e(t){var n,a,r,o,c;return Oe.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,T();case 2:0===(n=e.sent).resultCode&&(a=n.data,r=a.id,o=a.login,c=a.email,t(Re(r,c,o,!0)));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},Ze=function(){return function(){var e=Object(we.a)(Oe.a.mark((function e(t){var n;return Oe.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,M();case 2:n=e.sent,t({type:"SET_CAPTCHA",url:n.url});case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},ze=function(e){Object(l.a)(n,e);var t=Object(s.a)(n);function n(){return Object(i.a)(this,n),t.apply(this,arguments)}return Object(u.a)(n,[{key:"componentDidMount",value:function(){this.props.authMe()}},{key:"render",value:function(){return r.a.createElement(d,this.props)}}]),n}(r.a.Component),Je=Object(O.b)((function(e){return{isAuth:e.auth.isAuth,login:e.auth.login}}),{authMe:Ge,logout:function(){return function(e){return x().then((function(t){0===t.resultCode&&e(Re(null,null,null,!1))}))}}})(ze),Fe=Object(fe.a)(50),Qe=Object(ge.a)({form:"login"})((function(e){return r.a.createElement("form",{onSubmit:e.handleSubmit},r.a.createElement("div",null,r.a.createElement(de.a,{component:me.a,name:"email",placeholder:"login",validate:[fe.b,Fe]})),r.a.createElement("div",null,r.a.createElement(de.a,{component:me.a,name:"password",type:"password",placeholder:"password",validate:[fe.b,Fe]})),r.a.createElement("div",null,"remember me:",r.a.createElement(de.a,{component:"input",name:"rememberMe",type:"checkbox"})),e.captcha&&r.a.createElement("div",null,r.a.createElement("div",null,"Captcha:"),r.a.createElement("div",null,r.a.createElement("img",{src:e.captcha})),r.a.createElement("div",null,r.a.createElement(de.a,{component:me.a,name:"captcha",placeholder:"enter the characters"}))),r.a.createElement("button",null,"Login"),r.a.createElement("div",null,e.error))})),We=Object(O.b)((function(e){return{isAuth:e.auth.isAuth,captcha:e.auth.captcha}}),{login:function(e,t,n,a){return function(){var r=Object(we.a)(Oe.a.mark((function r(o){var c;return Oe.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,U(e,t,n,a);case 2:0===(c=r.sent).resultCode?o(Ge()):(10===c.resultCode&&o(Ze()),o(Object(Me.a)("login",{_error:c.messages[0]})));case 4:case"end":return r.stop()}}),r)})));return function(e){return r.apply(this,arguments)}}()}})((function(e){return e.isAuth?r.a.createElement(v.a,{to:"/profile"}):r.a.createElement("div",null,"LOGIN",r.a.createElement(Qe,{captcha:e.captcha,onSubmit:function(t){e.login(t.email,t.password,!0,t.captcha)}}))})),Ye={isInitialized:!1},He=r.a.lazy((function(){return n.e(3).then(n.bind(null,298))})),Ve=function(e){Object(l.a)(n,e);var t=Object(s.a)(n);function n(e){return Object(i.a)(this,n),t.call(this,e)}return Object(u.a)(n,[{key:"componentDidMount",value:function(){this.props.initializeAppThunk()}},{key:"render",value:function(){return this.props.isInitialized?r.a.createElement("div",{className:"wrapper"},r.a.createElement(Je,null),r.a.createElement(h,null),r.a.createElement("div",{className:"mcontent"},r.a.createElement(v.b,{path:"/profile/:userId?",render:function(){return r.a.createElement(Le,null)}}),r.a.createElement(v.b,{path:"/dialogs",render:function(){return r.a.createElement(a.Suspense,{fallback:r.a.createElement("div",null,"loading...")}," ",r.a.createElement(He,null))}}),r.a.createElement(v.b,{path:"/news",component:b}),r.a.createElement(v.b,{path:"/settings",component:A}),r.a.createElement(v.b,{path:"/users",render:function(){return r.a.createElement(le,null)}}),r.a.createElement(v.b,{path:"/login",render:function(){return r.a.createElement(We,null)}}))):r.a.createElement("img",{src:Q.a,alt:""})}}]),n}(r.a.Component),Ke=Object(ee.d)(v.f,Object(O.b)((function(e){return{isInitialized:e.init.isInitialized}}),{initializeAppThunk:function(){return function(e){var t=e(Ge());Promise.all([t]).then((function(){e({type:"INITIALIZED_SUCCESS"})}))}}}))(Ve);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var qe=n(130),Xe=n(137),$e=n(133),et=Object(ee.c)({profilePage:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Pe,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ADD-POST":return Object(j.a)(Object(j.a)({},e),{},{posts:[].concat(Object(w.a)(e.posts),[{id:3,post:t.newTextPost}])});case"SET_USER_PROFILE":return Object(j.a)(Object(j.a)({},e),{},{profile:t.profile});case"SET_STATUS":case"UPDATE_STATUS":return Object(j.a)(Object(j.a)({},e),{},{status:t.status});case"SET_PHOTO_SUCCESS":return Object(j.a)(Object(j.a)({},e),{},{profile:Object(j.a)(Object(j.a)({},e.profile),{},{photos:t.photo})});default:return e}},dialogsPage:qe.a,usersPage:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:_,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"FOLLOW":return Object(j.a)(Object(j.a)({},e),{},{users:e.users.map((function(e){return e.id===t.userId?Object(j.a)(Object(j.a)({},e),{},{followed:!0}):e}))});case"UNFOLLOW":return Object(j.a)(Object(j.a)({},e),{},{users:e.users.map((function(e){return e.id===t.userId?Object(j.a)(Object(j.a)({},e),{},{followed:!1}):e}))});case"SET_USERS":return Object(j.a)(Object(j.a)({},e),{},{users:t.users});case"SET_CURRENT_PAGE":return Object(j.a)(Object(j.a)({},e),{},{currentPage:t.currentPage});case"SET_USERS_COUNT":return Object(j.a)(Object(j.a)({},e),{},{totalUsersCount:t.count});case"TOGGLE_IS_LOADING":return Object(j.a)(Object(j.a)({},e),{},{isLoading:t.toggle});case"FOLLOWING_IN_PROGRESS":return Object(j.a)(Object(j.a)({},e),{},{followingInProgress:t.isFetching?[].concat(Object(w.a)(e.followingInProgress),[t.userId]):[e.followingInProgress.filter((function(e){return e!=t.userId}))]});default:return e}},auth:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:_e,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_USER_DATA":return Object(j.a)(Object(j.a)({},e),t.data);case"SET_CAPTCHA":return Object(j.a)(Object(j.a)({},e),{},{captcha:t.url});default:return e}},form:$e.a,init:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ye,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"INITIALIZED_SUCCESS":return Object(j.a)(Object(j.a)({},e),{},{isInitialized:!0});default:return e}}}),tt=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||ee.d,nt=Object(ee.e)(et,tt(Object(ee.a)(Xe.a)));window.store=nt;var at=nt;c.a.render(r.a.createElement(f.a,null,r.a.createElement(r.a.StrictMode,null,r.a.createElement(O.a,{store:at},r.a.createElement(Ke,null)))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},31:function(e,t,n){"use strict";n.d(t,"b",(function(){return a})),n.d(t,"a",(function(){return r}));var a=function(e){if(!e)return"Field is required"},r=function(e){return function(t){if(t.length>e)return"Max length ".concat(e," simbols")}}},38:function(e,t,n){e.exports=n.p+"static/media/preloader.f0cd0355.svg"},69:function(e,t){e.exports="data:image/png;base64,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"},71:function(e,t,n){e.exports={logo:"Header_logo__3HQGx",header:"Header_header__TTCwO",loginBlock:"Header_loginBlock__HYTLy",myButton:"Header_myButton__2nncy"}},72:function(e,t,n){e.exports={paginator:"Paginator_paginator__2WzZ0",pageNumber:"Paginator_pageNumber__p_Mrl",selectedPage:"Paginator_selectedPage__2bwsy"}},74:function(e,t,n){e.exports={posts:"Myposts_posts__mEBJd",myButton:"Myposts_myButton__ohpJd",addNewPosts:"Myposts_addNewPosts__2uK4K"}},77:function(e,t,n){"use strict";n.d(t,"a",(function(){return m}));var a=n(24),r=n(25),o=n(27),c=n(26),i=n(0),u=n.n(i),l=n(9),s=n(10),p=function(e){return{auth:e.auth.isAuth}},m=function(e){var t=function(t){Object(o.a)(i,t);var n=Object(c.a)(i);function i(){return Object(a.a)(this,i),n.apply(this,arguments)}return Object(r.a)(i,[{key:"render",value:function(){return this.props.auth?u.a.createElement(e,this.props):u.a.createElement(l.a,{to:"/login"})}}]),i}(u.a.Component);return Object(s.b)(p)(t)}},95:function(e,t,n){e.exports={formcontrollError:"FormContols_formcontrollError__gTRpO"}},98:function(e,t,n){e.exports={avatar:"Post_avatar__RIQ_e",post:"Post_post__3dLwa"}}},[[163,1,2]]]);
//# sourceMappingURL=main.d9a167f6.chunk.js.map